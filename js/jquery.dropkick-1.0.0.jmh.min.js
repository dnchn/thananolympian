(function(b,f,m){var c=false;if(b.browser.msie&&b.browser.version.substr(0,1)<7){c=true}else{m.documentElement.className=m.documentElement.className+" dk_fouc"}var q={},s=[],o={left:37,up:38,right:39,down:40,enter:13},e=['<div class="dk_container" id="dk_container_{{ id }}" tabindex="{{ tabindex }}">','<a class="dk_toggle">','<span class="dk_label">{{ label }}</span>',"</a>",'<div class="dk_options">','<ul class="dk_options_inner">',"</ul>","</div>","</div>"].join(""),h='<li class="{{ current }}"><a data-dk-dropdown-value="{{ value }}">{{ text }}</a></li>',i={startSpeed:1000,theme:false,change:false},l=false;q.init=function(t){t=b.extend({},i,t);return this.each(function(){var w=b(this),C=w.find(":selected").first(),B=w.find("option"),A=w.data("dropkick")||{},u=w.attr("id")||w.attr("name"),v=t.width||w.outerWidth(),x=w.attr("tabindex")?w.attr("tabindex"):"",y=false,z;if(A.id){return w}else{A.settings=t;A.tabindex=x;A.id=u;A.$original=C;A.$select=w;A.value=d(w.val())||d(C.attr("value"));A.label=C.text();A.options=B}y=a(e,A);y.find(".dk_toggle").css({width:v+"px"});w.before(y);y=b("#dk_container_"+u).fadeIn(t.startSpeed);z=t.theme?t.theme:"default";y.addClass("dk_theme_"+z);A.theme=z;A.$dk=y;w.data("dropkick",A);y.data("dropkick",A);s[s.length]=w;y.bind("focus.dropkick",function(D){y.addClass("dk_focus")}).bind("blur.dropkick",function(D){y.removeClass("dk_open dk_focus")});setTimeout(function(){w.hide()},0)})};q.theme=function(x){var u=b(this),v=u.data("dropkick"),t=v.$dk,w="dk_theme_"+v.theme;t.removeClass(w).addClass("dk_theme_"+x);v.theme=x};q.reset=function(){for(var v=0,t=s.length;v<t;v++){var x=s[v].data("dropkick"),u=x.$dk,w=u.find("li").first();u.find(".dk_label").text(x.label);u.find(".dk_options_inner").animate({scrollTop:0},0);n(w,u);g(w,u,true)}};b.fn.dropkick=function(t){if(!c){if(q[t]){return q[t].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof t==="object"||!t){return q.init.apply(this,arguments)}}}};function p(A,v){var t=A.keyCode,w=v.data("dropkick"),D=v.find(".dk_options"),z=v.hasClass("dk_open"),B=v.find(".dk_option_current"),y=D.find("li").first(),C=D.find("li").last(),x,u;switch(t){case o.enter:if(z){g(B.find("a"),v);k(v)}else{r(v)}A.preventDefault();break;case o.up:u=B.prev("li");if(z){if(u.length){n(u,v)}else{n(C,v)}}else{r(v)}A.preventDefault();break;case o.down:if(z){x=B.next("li").first();if(x.length){n(x,v)}else{n(y,v)}}else{r(v)}A.preventDefault();break;default:break}}function g(v,u,w){var y,t,x;y=v.attr("data-dk-dropdown-value");t=v.text();x=u.data("dropkick");$select=x.$select;$select.val(y);u.find(".dk_label").text(t);w=w||false;if(x.settings.change&&!w){x.settings.change.call($select,y,t)}}function n(u,t){t.find(".dk_option_current").removeClass("dk_option_current");u.addClass("dk_option_current");j(t,u)}function j(v,u){var t=u.prevAll("li").outerHeight()*u.prevAll("li").length;v.find(".dk_options_inner").animate({scrollTop:t+"px"},0)}function k(t){t.removeClass("dk_open")}function r(t){var u=t.data("dropkick");t.find(".dk_options").css({top:t.find(".dk_toggle").outerHeight()-1});t.toggleClass("dk_open")}function a(y,A){var B=y,C=[],v;B=B.replace("{{ id }}",A.id);B=B.replace("{{ label }}",A.label);B=B.replace("{{ tabindex }}",A.tabindex);if(A.options&&A.options.length){for(var w=0,u=A.options.length;w<u;w++){var t=b(A.options[w]),z="dk_option_current",x=h;x=x.replace("{{ value }}",t.val());x=x.replace("{{ current }}",(d(t.val())===A.value)?z:"");x=x.replace("{{ text }}",t.text());C[C.length]=x}}v=b(B);v.find(".dk_options_inner").html(C.join(""));return v}function d(t){return(b.trim(t).length>0)?t:false}b(function(){b(".dk_toggle").live("click",function(u){var t=b(this).parents(".dk_container").first();r(t);if("ontouchstart" in f){t.addClass("dk_touch");t.find(".dk_options_inner").addClass("scrollable vertical")}u.preventDefault();return false});b(".dk_options a").live((b.browser.msie?"mousedown":"click"),function(w){var v=b(this),t=v.parents(".dk_container").first(),u=t.data("dropkick");k(t);g(v,t);n(v.parent(),t);w.preventDefault();return false});b(m).bind("keydown.dk_nav",function(v){var w=b(".dk_container.dk_open"),u=b(".dk_container.dk_focus"),t=null;if(w.length){t=w}else{if(u.length&&!w.length){t=u}}if(t){p(v,t)}})})})(jQuery,window,document);